# Задание на семестр 3.1

## О задании
Данное задание нужно делать в командах. 
Будет хорошо, если команды останутся те же самые что и на 2 курсе. 
Задание нужно продолжать в том же репозитории, в котором вы работали на 2 курсе.
В течении семестра на 3 курсе необходимо на каждом этапе "накидывать" новые возможности и фичи на ваш проект. 

## Функциональные требования
В итоге в ваш проект нужно добавить окно для чата с поддержкой (да-да маленькое окошечко где-нибудь с боку). 
Должна быть возможность:
- писать сообщения от клиента
- отвечать от имени администратора (поддержки)
- загружать картинки

## Нефункциональные требования
### Этап 1:
Запустить проект в docker-compose. 
Если проект сделан на razor, то надо переписать на react.
Миграции должны накатываться вместе с запуском проекта.
Накинуть анализаторы кода в проект.
Настроить CI в вашем репозитории:
1) Должен быть этап с билдом.
2) Должен быть этап с анализатором кода. Для фронта и бэка должен быть отдельный анализатор
3) Если хоть из п.1 или п.2 не проходит (ошибки или даже хоть 1 варнинг), то пайплайн не должен проходить

### Этап 2:
Добавляем чат поддержки. Чат должно выглядить как отдельное всплывающее маленькое окошечко.  
Будет отлично если оно доступно со всех страниц. 
- SignalR используется для real-time коммуникации.
- REST для загрузки истории.
- In-memory очередь на основе MassTransit для записи истории в БД.

### Этап 3:
- Меняем раеализацию очереди на RabbitMQ.
- Запускаем кролика в докере.
- Сервис, для подписки к RabbitMQ, уезжает в отдельный проект.

### Этап 4:
- Переделайте все ваши запросы на архитектурный стиль CQRS. 
- Соблюдение чистой архитектуры важно.

### Этап 5:
- Добавляем S3-совместимое файловое хранилище(любое) в docker
- Добавляем загрузку в файловое хранилище
- Для работы с хранилищем должен быть отдельный сервис

### Этап 6:
Реализовать сценарий «загрузка файла и метаданных». Метаданные могут отличаться в зависимости от типа файлов, например:
- Для .mp3 - это "исполнитель», "альбом», «название трека», «продолжительность композиции», ...
- Для видео (.mov, .avi и т.д.) - это «название фильма», «студиям», «режиссер», «актерский состав», ...
- Придумайте еще как минимум 3 типа других типа файла
- Запись данных должна происходить сначала в временное S3 хранилище, а потом в постоянное
- Переход из временного должно происходить только в том случае, если удалась отдельная загрузка метаданных и основоного файла
- Временные метаданные должны храниться в редисе
- В редисе также должен храниться счётчик загрузки данных. Когда счётчик будет = 2, то делать перенос данных из временного хранилища в постоянное и чистить редис
- Редис должен очищаться раз в день

### Этап 7:
Kubernetis. Необходимо текущий проект завернуть в k8s 

